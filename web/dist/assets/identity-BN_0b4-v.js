import{r,j as s,R as E,a as J,o as Ce,_ as Se,s as Ne,t as V,b as Ee,c as we}from"./index-oSRV96JR.js";import{m as w,n as W,P,c as X,u as Ae,a as je,F as Pe,b as q,d as M,e as O,f as k,I as Fe,g as H,B as _e,A as Te,C as Me,h as Oe,i as ke,k as De}from"./input-CeFEcfXB.js";import{s as Ge}from"./auth-service-sljuZ7OK.js";import{c as Le}from"./createLucideIcon-B9YSxgur.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Be=Le("circle",Ue);function S(e,t,{checkForDefaultPrevented:o=!0}={}){return function(c){if(e?.(c),o===!1||!c.defaultPrevented)return t?.(c)}}function G(e,t=[]){let o=[];function n(a,i){const u=r.createContext(i),f=o.length;o=[...o,i];const d=p=>{const{scope:R,children:v,...h}=p,x=R?.[e]?.[f]||u,m=r.useMemo(()=>h,Object.values(h));return s.jsx(x.Provider,{value:m,children:v})};d.displayName=a+"Provider";function l(p,R){const v=R?.[e]?.[f]||u,h=r.useContext(v);if(h)return h;if(i!==void 0)return i;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[d,l]}const c=()=>{const a=o.map(i=>r.createContext(i));return function(u){const f=u?.[e]||a;return r.useMemo(()=>({[`__scope${e}`]:{...u,[e]:f}}),[u,f])}};return c.scopeName=e,[n,ze(c,...t)]}function ze(...e){const t=e[0];if(e.length===1)return t;const o=()=>{const n=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(a){const i=n.reduce((u,{useScope:f,scopeName:d})=>{const p=f(a)[`__scope${d}`];return{...u,...p}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return o.scopeName=t.scopeName,o}function Ke(e){const t=e+"CollectionProvider",[o,n]=G(t),[c,a]=o(t,{collectionRef:{current:null},itemMap:new Map}),i=x=>{const{scope:m,children:y}=x,C=E.useRef(null),g=E.useRef(new Map).current;return s.jsx(c,{scope:m,itemMap:g,collectionRef:C,children:y})};i.displayName=t;const u=e+"CollectionSlot",f=W(u),d=E.forwardRef((x,m)=>{const{scope:y,children:C}=x,g=a(u,y),b=w(m,g.collectionRef);return s.jsx(f,{ref:b,children:C})});d.displayName=u;const l=e+"CollectionItemSlot",p="data-radix-collection-item",R=W(l),v=E.forwardRef((x,m)=>{const{scope:y,children:C,...g}=x,b=E.useRef(null),A=w(m,b),j=a(l,y);return E.useEffect(()=>(j.itemMap.set(b,{ref:b,...g}),()=>void j.itemMap.delete(b))),s.jsx(R,{[p]:"",ref:A,children:C})});v.displayName=l;function h(x){const m=a(e+"CollectionConsumer",x);return E.useCallback(()=>{const C=m.collectionRef.current;if(!C)return[];const g=Array.from(C.querySelectorAll(`[${p}]`));return Array.from(m.itemMap.values()).sort((j,T)=>g.indexOf(j.ref.current)-g.indexOf(T.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:i,Slot:d,ItemSlot:v},h,n]}var F=globalThis?.document?r.useLayoutEffect:()=>{},$e=J[" useId ".trim().toString()]||(()=>{}),Ve=0;function We(e){const[t,o]=r.useState($e());return F(()=>{o(n=>n??String(Ve++))},[e]),t?`radix-${t}`:""}function qe(e){const t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>(...o)=>t.current?.(...o),[])}var He=J[" useInsertionEffect ".trim().toString()]||F;function Q({prop:e,defaultProp:t,onChange:o=()=>{},caller:n}){const[c,a,i]=Ye({defaultProp:t,onChange:o}),u=e!==void 0,f=u?e:c;{const l=r.useRef(e!==void 0);r.useEffect(()=>{const p=l.current;p!==u&&console.warn(`${n} is changing from ${p?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),l.current=u},[u,n])}const d=r.useCallback(l=>{if(u){const p=Je(l)?l(e):l;p!==e&&i.current?.(p)}else a(l)},[u,e,a,i]);return[f,d]}function Ye({defaultProp:e,onChange:t}){const[o,n]=r.useState(e),c=r.useRef(o),a=r.useRef(t);return He(()=>{a.current=t},[t]),r.useEffect(()=>{c.current!==o&&(a.current?.(o),c.current=o)},[o,c]),[o,n,a]}function Je(e){return typeof e=="function"}var Xe=r.createContext(void 0);function Z(e){const t=r.useContext(Xe);return e||t||"ltr"}var B="rovingFocusGroup.onEntryFocus",Qe={bubbles:!1,cancelable:!0},_="RovingFocusGroup",[z,ee,Ze]=Ke(_),[et,te]=G(_,[Ze]),[tt,ot]=et(_),oe=r.forwardRef((e,t)=>s.jsx(z.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(z.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(nt,{...e,ref:t})})}));oe.displayName=_;var nt=r.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,orientation:n,loop:c=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:f,onEntryFocus:d,preventScrollOnEntryFocus:l=!1,...p}=e,R=r.useRef(null),v=w(t,R),h=Z(a),[x,m]=Q({prop:i,defaultProp:u??null,onChange:f,caller:_}),[y,C]=r.useState(!1),g=qe(d),b=ee(o),A=r.useRef(!1),[j,T]=r.useState(0);return r.useEffect(()=>{const I=R.current;if(I)return I.addEventListener(B,g),()=>I.removeEventListener(B,g)},[g]),s.jsx(tt,{scope:o,orientation:n,dir:h,loop:c,currentTabStopId:x,onItemFocus:r.useCallback(I=>m(I),[m]),onItemShiftTab:r.useCallback(()=>C(!0),[]),onFocusableItemAdd:r.useCallback(()=>T(I=>I+1),[]),onFocusableItemRemove:r.useCallback(()=>T(I=>I-1),[]),children:s.jsx(P.div,{tabIndex:y||j===0?-1:0,"data-orientation":n,...p,ref:v,style:{outline:"none",...e.style},onMouseDown:S(e.onMouseDown,()=>{A.current=!0}),onFocus:S(e.onFocus,I=>{const ge=!A.current;if(I.target===I.currentTarget&&ge&&!y){const $=new CustomEvent(B,Qe);if(I.currentTarget.dispatchEvent($),!$.defaultPrevented){const U=b().filter(N=>N.focusable),be=U.find(N=>N.active),ye=U.find(N=>N.id===x),Ie=[be,ye,...U].filter(Boolean).map(N=>N.ref.current);se(Ie,l)}}A.current=!1}),onBlur:S(e.onBlur,()=>C(!1))})})}),ne="RovingFocusGroupItem",re=r.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,focusable:n=!0,active:c=!1,tabStopId:a,children:i,...u}=e,f=We(),d=a||f,l=ot(ne,o),p=l.currentTabStopId===d,R=ee(o),{onFocusableItemAdd:v,onFocusableItemRemove:h,currentTabStopId:x}=l;return r.useEffect(()=>{if(n)return v(),()=>h()},[n,v,h]),s.jsx(z.ItemSlot,{scope:o,id:d,focusable:n,active:c,children:s.jsx(P.span,{tabIndex:p?0:-1,"data-orientation":l.orientation,...u,ref:t,onMouseDown:S(e.onMouseDown,m=>{n?l.onItemFocus(d):m.preventDefault()}),onFocus:S(e.onFocus,()=>l.onItemFocus(d)),onKeyDown:S(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){l.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const y=ct(m,l.orientation,l.dir);if(y!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let g=R().filter(b=>b.focusable).map(b=>b.ref.current);if(y==="last")g.reverse();else if(y==="prev"||y==="next"){y==="prev"&&g.reverse();const b=g.indexOf(m.currentTarget);g=l.loop?it(g,b+1):g.slice(b+1)}setTimeout(()=>se(g))}}),children:typeof i=="function"?i({isCurrentTabStop:p,hasTabStop:x!=null}):i})})});re.displayName=ne;var rt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function st(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ct(e,t,o){const n=st(e.key,o);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return rt[n]}function se(e,t=!1){const o=document.activeElement;for(const n of e)if(n===o||(n.focus({preventScroll:t}),document.activeElement!==o))return}function it(e,t){return e.map((o,n)=>e[(t+n)%e.length])}var at=oe,ut=re;function lt(e){const[t,o]=r.useState(void 0);return F(()=>{if(e){o({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const a=c[0];let i,u;if("borderBoxSize"in a){const f=a.borderBoxSize,d=Array.isArray(f)?f[0]:f;i=d.inlineSize,u=d.blockSize}else i=e.offsetWidth,u=e.offsetHeight;o({width:i,height:u})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else o(void 0)},[e]),t}function dt(e){const t=r.useRef({value:e,previous:e});return r.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function ft(e,t){return r.useReducer((o,n)=>t[o][n]??o,e)}var ce=e=>{const{present:t,children:o}=e,n=mt(t),c=typeof o=="function"?o({present:n.isPresent}):r.Children.only(o),a=w(n.ref,pt(c));return typeof o=="function"||n.isPresent?r.cloneElement(c,{ref:a}):null};ce.displayName="Presence";function mt(e){const[t,o]=r.useState(),n=r.useRef(null),c=r.useRef(e),a=r.useRef("none"),i=e?"mounted":"unmounted",[u,f]=ft(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const d=D(n.current);a.current=u==="mounted"?d:"none"},[u]),F(()=>{const d=n.current,l=c.current;if(l!==e){const R=a.current,v=D(d);e?f("MOUNT"):v==="none"||d?.display==="none"?f("UNMOUNT"):f(l&&R!==v?"ANIMATION_OUT":"UNMOUNT"),c.current=e}},[e,f]),F(()=>{if(t){let d;const l=t.ownerDocument.defaultView??window,p=v=>{const x=D(n.current).includes(CSS.escape(v.animationName));if(v.target===t&&x&&(f("ANIMATION_END"),!c.current)){const m=t.style.animationFillMode;t.style.animationFillMode="forwards",d=l.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=m)})}},R=v=>{v.target===t&&(a.current=D(n.current))};return t.addEventListener("animationstart",R),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{l.clearTimeout(d),t.removeEventListener("animationstart",R),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else f("ANIMATION_END")},[t,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:r.useCallback(d=>{n.current=d?getComputedStyle(d):null,o(d)},[])}}function D(e){return e?.animationName||"none"}function pt(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,o=t&&"isReactWarning"in t&&t.isReactWarning;return o?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,o=t&&"isReactWarning"in t&&t.isReactWarning,o?e.props.ref:e.props.ref||e.ref)}var K="Radio",[vt,ie]=G(K),[ht,Rt]=vt(K),ae=r.forwardRef((e,t)=>{const{__scopeRadio:o,name:n,checked:c=!1,required:a,disabled:i,value:u="on",onCheck:f,form:d,...l}=e,[p,R]=r.useState(null),v=w(t,m=>R(m)),h=r.useRef(!1),x=p?d||!!p.closest("form"):!0;return s.jsxs(ht,{scope:o,checked:c,disabled:i,children:[s.jsx(P.button,{type:"button",role:"radio","aria-checked":c,"data-state":fe(c),"data-disabled":i?"":void 0,disabled:i,value:u,...l,ref:v,onClick:S(e.onClick,m=>{c||f?.(),x&&(h.current=m.isPropagationStopped(),h.current||m.stopPropagation())})}),x&&s.jsx(de,{control:p,bubbles:!h.current,name:n,value:u,checked:c,required:a,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});ae.displayName=K;var ue="RadioIndicator",le=r.forwardRef((e,t)=>{const{__scopeRadio:o,forceMount:n,...c}=e,a=Rt(ue,o);return s.jsx(ce,{present:n||a.checked,children:s.jsx(P.span,{"data-state":fe(a.checked),"data-disabled":a.disabled?"":void 0,...c,ref:t})})});le.displayName=ue;var xt="RadioBubbleInput",de=r.forwardRef(({__scopeRadio:e,control:t,checked:o,bubbles:n=!0,...c},a)=>{const i=r.useRef(null),u=w(i,a),f=dt(o),d=lt(t);return r.useEffect(()=>{const l=i.current;if(!l)return;const p=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(p,"checked").set;if(f!==o&&v){const h=new Event("click",{bubbles:n});v.call(l,o),l.dispatchEvent(h)}},[f,o,n]),s.jsx(P.input,{type:"radio","aria-hidden":!0,defaultChecked:o,...c,tabIndex:-1,ref:u,style:{...c.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});de.displayName=xt;function fe(e){return e?"checked":"unchecked"}var gt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],L="RadioGroup",[bt,Ot]=G(L,[te,ie]),me=te(),pe=ie(),[yt,It]=bt(L),ve=r.forwardRef((e,t)=>{const{__scopeRadioGroup:o,name:n,defaultValue:c,value:a,required:i=!1,disabled:u=!1,orientation:f,dir:d,loop:l=!0,onValueChange:p,...R}=e,v=me(o),h=Z(d),[x,m]=Q({prop:a,defaultProp:c??null,onChange:p,caller:L});return s.jsx(yt,{scope:o,name:n,required:i,disabled:u,value:x,onValueChange:m,children:s.jsx(at,{asChild:!0,...v,orientation:f,dir:h,loop:l,children:s.jsx(P.div,{role:"radiogroup","aria-required":i,"aria-orientation":f,"data-disabled":u?"":void 0,dir:h,...R,ref:t})})})});ve.displayName=L;var he="RadioGroupItem",Re=r.forwardRef((e,t)=>{const{__scopeRadioGroup:o,disabled:n,...c}=e,a=It(he,o),i=a.disabled||n,u=me(o),f=pe(o),d=r.useRef(null),l=w(t,d),p=a.value===c.value,R=r.useRef(!1);return r.useEffect(()=>{const v=x=>{gt.includes(x.key)&&(R.current=!0)},h=()=>R.current=!1;return document.addEventListener("keydown",v),document.addEventListener("keyup",h),()=>{document.removeEventListener("keydown",v),document.removeEventListener("keyup",h)}},[]),s.jsx(ut,{asChild:!0,...u,focusable:!i,active:p,children:s.jsx(ae,{disabled:i,required:a.required,checked:p,...f,...c,name:a.name,ref:l,onCheck:()=>a.onValueChange(c.value),onKeyDown:S(v=>{v.key==="Enter"&&v.preventDefault()}),onFocus:S(c.onFocus,()=>{R.current&&d.current?.click()})})})});Re.displayName=he;var Ct="RadioGroupIndicator",xe=r.forwardRef((e,t)=>{const{__scopeRadioGroup:o,...n}=e,c=pe(o);return s.jsx(le,{...c,...n,ref:t})});xe.displayName=Ct;var St=ve,Nt=Re,Et=xe;function wt({className:e,...t}){return s.jsx(St,{"data-slot":"radio-group",className:X("grid gap-3",e),...t})}function Y({className:e,...t}){return s.jsx(Nt,{"data-slot":"radio-group-item",className:X("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(Et,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:s.jsx(Be,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}const At=Ce({name:Ne().min(2,"Please enter your name"),privacy:Se(["public","private"])});function jt({redirectTo:e}){const[t,o]=r.useState(!1),n=Ae({resolver:je(At),defaultValues:{name:"",privacy:"private"}}),c=i=>{const f=i&&i.length>0?i:"/";window.location.href=f},a=async i=>{o(!0);try{await Ge(i),V.success("Identity saved",{description:"Redirecting you to the dashboard…"}),c(e)}catch(u){V.error("Failed to save identity",{description:u instanceof Error?u.message:"Please try again."})}finally{o(!1)}};return s.jsx(Pe,{...n,children:s.jsxs("form",{className:"mt-6 space-y-6",onSubmit:n.handleSubmit(a),children:[s.jsx(q,{control:n.control,name:"name",render:({field:i})=>s.jsxs(M,{children:[s.jsx(O,{children:"Display name"}),s.jsx(k,{children:s.jsx(Fe,{placeholder:"Jane Doe",autoComplete:"off",...i})}),s.jsx(H,{})]})}),s.jsx(q,{control:n.control,name:"privacy",render:({field:i})=>s.jsxs(M,{className:"space-y-3",children:[s.jsx(O,{children:"Privacy"}),s.jsx(k,{children:s.jsxs(wt,{onValueChange:i.onChange,value:i.value,className:"grid gap-4 sm:grid-cols-2",children:[s.jsxs(M,{className:"space-y-1 rounded-md border p-3",children:[s.jsx(k,{children:s.jsx(Y,{value:"public"})}),s.jsx(O,{className:"text-sm font-medium",children:"Public"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Other users can find your profile."})]}),s.jsxs(M,{className:"space-y-1 rounded-md border p-3",children:[s.jsx(k,{children:s.jsx(Y,{value:"private"})}),s.jsx(O,{className:"text-sm font-medium",children:"Private"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Stay hidden from directory searches."})]})]})}),s.jsx(H,{})]})}),s.jsx(_e,{className:"w-full",disabled:t,children:t?"Saving…":"Continue"})]})})}function kt(){const e=Ee.useSearch(),t="redirect"in e&&typeof e.redirect=="string"&&e.redirect.length>0&&e.redirect!=="undefined"?e.redirect:void 0,o=we(n=>n.hasIdentity);return r.useEffect(()=>{if(o){const n="/";window.location.href=t||n}},[o,t]),o?null:s.jsx(Te,{children:s.jsxs(Me,{children:[s.jsx(Oe,{children:s.jsx(ke,{className:"text-lg tracking-tight",children:"Finish setting up your profile"})}),s.jsx(De,{children:s.jsx(jt,{redirectTo:t})})]})})}export{kt as component};
